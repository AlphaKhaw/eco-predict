data_parser:
  url: "https://beta.data.gov.sg/collections/22/view"
  expected_files:
    - ListingofBuildingEnergyPerformanceData2019.xlsx
    - ListingofBuildingEnergyPerformanceData2020.csv
    - ListingofBuildingEnergyPerformanceDataforCommercialBuildings.csv
  downloads_foldername: "Downloads"
  output_folderpath: "${hydra:runtime.cwd}/data/raw"
  download_file_button_xpath: '//*[@id="__next"]/div/main/div/div[1]/div/button'
  download_button_xpath: '//*[@id="chakra-modal-:r3:"]/div[3]/button'
  dataset_xpaths:
    'ListingofBuildingEnergyPerformanceData2019.xlsx': '/html/body/div[3]/div/div[3]/div/section/div[2]/div/div[1]/div/div/div'
    'ListingofBuildingEnergyPerformanceData2020.csv': '/html/body/div[3]/div/div[3]/div/section/div[2]/div/div[2]/div/div/div'
    'ListingofBuildingEnergyPerformanceDataforCommercialBuildings.csv': '/html/body/div[3]/div/div[3]/div/section/div[2]/div/div[3]/div/div/div'

data_preprocessor:
  general:
    output_folderpath: "${hydra:runtime.cwd}/data/preprocessed"
    suffix: "preprocessed.csv"
    common_identifier: "buildingaddress"
  datasets:
    2019:
      enable_preprocessing: false
    2020:
      enable_preprocessing: true
      input_filepath: "${hydra:runtime.cwd}/data/raw/ListingofBuildingEnergyPerformanceData2020.csv"
      preprocessing_steps:
        drop_columns:
          - 'buildingname'
          - 'buildingtype'
          - 'greenmarkyearofaward'
          - 'centralisedairconditioningplantefficiency'
          - 'yearoflastchillerplantaudithealthcheck'
        remove_symbols:
          'grossfloorarea': ','
          'percentageofairconditionedfloorarea': '%'
          'averagemonthlybuildingoccupancyrate': '%'
          'percentageusageofled': '%'
        convert_dtypes:
          'grossfloorarea': float
          'percentageofairconditionedfloorarea': float
          'averagemonthlybuildingoccupancyrate': float
          'percentageusageofled': float
        impute_categorical_columns:
          'buildingsize':
            value: 'Omit'
            threshold:
          'greenmarkrating':
            value: 'Not Awarded'
          'greenmarkversion':
            value: 'Not Awarded'
        impute_numerical_columns:
          'grossfloorarea':
            strategy: 'median'
          'percentageofairconditionedfloorarea':
            strategy: 'median'
          'averagemonthlybuildingoccupancyrate':
            strategy: 'median'
          'numberofhotelrooms':
            strategy: 'constant'
            value: 0.0
          'ageofchiller':
            strategy: 'median'
          '2017':
            strategy: 'median'
          '2018':
            strategy: 'median'
          '2019':
            strategy: 'median'
          '2020':
            strategy: 'median'
        encode_columns:
          binary:
            'installationofsolarpv':
              'Y': 1
              'N': 0
          nominal:
            - 'mainbuildingfunction'
            - 'greenmarkversion'
            - 'typeofairconditioningsystem'
          ordinal:
            'buildingsize':
              'Small': 1
              'Large': 2
            'greenmarkrating':
              'Not Awarded': 1
              'Legislated': 2
              'Certified': 3
              'Gold': 4
              'GoldPlus': 5
              'Platinum': 6
        rename_columns:
          '2017': '2017energyuseintensity'
          '2018': '2018energyuseintensity'
          '2019': '2019energyuseintensity'
          '2020': '2020energyuseintensity'
    commercial:
      enable_preprocessing: false

data_splitter:
  general:
    input_filepath: "${data_preprocessor.general.output_folderpath}/${data_preprocessor.general.suffix}"
    output_folderpath: "${hydra:runtime.cwd}/data/split"
    suffix: ["train.csv", "val.csv", "test.csv"]
    seed: 42
  ratios:
    train_ratio: 0.7
    val_ratio: 0.1
    test_ratio: 0.2
  split_tolerance: 0.01
